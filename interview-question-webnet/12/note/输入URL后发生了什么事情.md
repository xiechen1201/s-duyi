# 输入URL后发生了什么事情

- 补全协议和端口号；

> 如何补全还有很多内容；

- 浏览器对 URL 的字符进行编码；

- 根据 URL 地址查找本地缓存，如果命中缓存，则直接使用缓存；

- 向 DNS 服务器发起域名解析请求；

- 浏览器和服务器建立 TCP 链接；

- 如果是 HTTPS 协议，还会建立 SSL 链接，建立加密信道；

- 浏览器决定携带哪些 Cookies 到请求头中；

- 设置请求头、协议版本，发送 GET 请求

> 具体如何发生不关注。

- 服务端处理，返回一个 HTTP 报文；

- 浏览器根据 HTTP 的版本和 Connection 字段，决定是否关闭 TCP 链接；

- 浏览器根据响应的状态码，决定如何处理响应；

- 根据 Content-type 识别响应的数据类型，如果是 text/html 则对响应体解析，否则进行其他处理；

- 根据其他的响应头信息决定是否要进行缓存、Cookie 的设置；

- 浏览器从上到下进行解析 HTML 文档，如果遇到外部资源，进一步进行请求资源；

- 解析生成 DOM 树和 CSSOM 树，生成渲染树；

- 解析的过程中触发对应的事件，例如 DOMContentLoaded、load。