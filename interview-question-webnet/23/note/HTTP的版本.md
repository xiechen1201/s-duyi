# HTTP的版本

## HTTP1.0

1、无法复用连接

每次请求响应都需要进行 TCP 三次握手和四次挥手，浪费时间。

无法充分利用带宽资源。

> 拥塞控制

2、队头阻塞

上一个请求完成后才能完成下一个请求。

## HTTP1.1

1、默认开启长链接

可以有效利用同一个 TCP 链接，节约带宽资源。

2、管道化和队头阻塞

如果第一个请求处理比较耗时，第二个请求比较快，这个时候必须等到第一个资源返回后才能响应。

为什么必须按照请求到达的顺序呢？

如果不约定顺序就会造成混乱。

依然会有队头阻塞。

优化：

- 开启多个 TCP 通道（例如使用微信、QQ 两个软件），最多开启 6 个 TCP 通道。

## HTTP2.0

（图片使用的是网络四层模型）

1、二进制分帧

解决了队头阻塞问题。之前头和体是一个整体，不能分割，现在可以拆分更小的帧。

好处就是顺序就可以乱来了，因为有流的 ID。

打乱：不同的流之间顺序可以打乱，但是同一个流顺序是不能乱的。

2、头部压缩

带冒号的头字段表示新增的字段。

静态表和动态表。

动态表：一开始是空的（同一个 TCP 链接中，双方都有，根据后面的请求不断的新增内容）

例如最开始想发送一个自定义的请求头 auth: token=xxx，发现静态表中没有，则不能替换为数字，只能原封不动的发送过去，同时在动态表中进行记录。

服务器收到后也会在动态表中记录一条。

第二次下次发送的时候会直接发送动态表中的数字，服务器在到动态表中查找。

2、服务器推

客户端不主动请求的情况下，预先把资源推送给客户端。

